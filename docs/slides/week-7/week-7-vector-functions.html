<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <title>Introduction to Statistical Computing in R – Writing Vector Functions</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-b3bc3305d3b65543691033549249ddbf.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Writing Vector Functions</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="tuesday-february-18" class="slide level2">
<h2>Tuesday, February 18</h2>
<p>Today we will…</p>
<!-- + Reminder: Midterm Portfolio Meetings -->
<ul>
<li>New Material
<ul>
<li>Function Basics</li>
<li>Variable Scope + Environment</li>
</ul></li>
<li>PA 7: Writing Functions</li>
</ul>
<!-- # Midterm Portfolio Meetings -->
<!-- ## Midterm Portfolio Meetings -->
<!-- ::: {.incremental} -->
<!-- - No in-person class on Thursday -->
<!--   + Remember the time you signed up for: [Google Sheet with Sign-up Times](https://docs.google.com/spreadsheets/d/1b4fUfPIT_05niJlpHNnne_y5HXXB-43Nzph6_FWZf80/edit?usp=sharing)     -->
<!--   + Deadline to sign-up (or move your time) is Tuesday at 5pm. -->
<!-- - Meetings scheduled between 8am and 11am will be **in Dr. T's office (25-105)**.  -->
<!-- - Meetings scheduled between 12pm and 3pm will be **in our classroom (this room)**. -->
<!-- ::: -->
</section>
<section>
<section id="functions" class="title-slide slide level1 center">
<h1>Functions</h1>

</section>
<section id="why-write-functions" class="slide level2">
<h2>Why write functions?</h2>
<p>Functions allow you to automate common tasks!</p>
<ul>
<li>We’ve been using functions since Day 1, but when we write our own, we can <strong>customize</strong> them!</li>
<li>Have you found yourself copy-pasting code and only changing small parts?</li>
</ul>
</section>
<section id="why-write-functions-1" class="slide level2">
<h2>Why write functions?</h2>
<p><strong>Writing functions has three big advantages over copy-paste:</strong></p>
<ol type="1">
<li>Your code is easier to read.</li>
<li>To change your analysis, simply change one function.</li>
<li>You avoid mistakes.</li>
</ol>
</section></section>
<section>
<section id="function-basics" class="title-slide slide level1 center">
<h1>Function Basics</h1>

</section>
<section id="function-syntax" class="slide level2">
<h2>Function Syntax</h2>
<p><br></p>
<p><img data-src="images/syntax.png" style="width:90.0%" alt="Basic syntax of a function in R. The function 'func_name' is assigned using '<-' to 'function(func_arg1, func_arg2)'. The body of the function is enclosed in curly brackets. Inside the brackets, there is a placeholder comment labeled '# FUNCTION_BODY' and a 'return(func_value)' statement indicating the output of the function."></p>
</section>
<section id="function-syntax-1" class="slide level2">
<h2>Function Syntax</h2>
<p><img data-src="images/func_structure.png" alt="Illustration of R function syntax. The image explains the parts of a function in R using labeled arrows and colors. At the top, the name 'func_name' is assigned using '<-' to a function. An arrow points to 'func_name' with the label 'assign the function a NAME.' The keyword 'function' is highlighted, with an arrow labeled 'indicate we are creating a function.' The parentheses contain 'func_arg1, func_arg2,' which are labeled as 'specify ARGUMENTS of the function.' The body of the function is placed between curly brackets and labeled 'write the BODY of the function between curly brackets.' Finally, the 'return(func_value)' statement is labeled 'return a value as the OUTPUT of the function."></p>
</section>
<section id="a-very-simple-function" class="slide level2">
<h2>A (very) Simple Function</h2>
<p>Let’s <strong>define</strong> a function.</p>
<ul>
<li>You run the code to define the function just <strong>once</strong>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb1-3"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="fragment">
<p>Let’s <strong>call</strong> the function!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_two</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</div>
</section>
<section id="naming-add_two" class="slide level2">
<h2>Naming: <code>add_two</code></h2>
<p>The <strong>name</strong> of the function is chosen by the author.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a aria-hidden="true" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb4-2"><a aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb4-3"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Function names have no inherent meaning.</strong></p>
</div>
<div class="callout-content">
<p>The name you give to a function does not affect what the function does.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a aria-hidden="true" tabindex="-1"></a>add_three <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb5-2"><a aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">7</span></span>
<span id="cb5-3"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">add_three</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="arguments" class="slide level2">
<h2>Arguments</h2>
<p>The <strong>argument(s)</strong> of the function are chosen by the author.</p>
<ul>
<li>Arguments are how we pass external values into the function.</li>
<li>They are temporary variables that only exist inside the function body.</li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="midi">
<ul>
<li>We give them general names:
<ul>
<li><code>x</code>, <code>y</code>, <code>z</code> – vectors</li>
<li><code>df</code> – data frame</li>
<li><code>i</code>, <code>j</code> – indices</li>
</ul></li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb8-3"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</div>
</section>
<section id="arguments-1" class="slide level2">
<h2>Arguments</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Optional arguments</a></li><li><a href="#tabset-1-2">Required arguments</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="midi">
<p>If we supply a <strong>default</strong> value when <em>defining</em> the function, the argument is <strong>optional</strong> when <em>calling</em> the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a aria-hidden="true" tabindex="-1"></a>add_something <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">something =</span> <span class="dv">2</span>){</span>
<span id="cb9-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> something)</span>
<span id="cb9-3"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="midi">
<p>If a value is not supplied, <code>something</code> defaults to 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="dv">5</span>, <span class="at">something =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="midi">
<p>If we <strong>do not</strong> supply a default value when <em>defining</em> the function, the argument is <strong>required</strong> when <em>calling</em> the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a aria-hidden="true" tabindex="-1"></a>add_something <span class="ot">&lt;-</span> <span class="cf">function</span>(x, something){</span>
<span id="cb14-2"><a aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> something</span>
<span id="cb14-3"><a aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in add_something(x = 2): argument "something" is missing, with no default</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="body" class="slide level2">
<h2>Body: <code>{  }</code></h2>
<p>The <strong>body</strong> of the function is where the action happens.</p>
<ul>
<li>The body must be specified within a set of curly brackets.</li>
<li>The code in the body will be executed (in order) whenever the function is called.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb16-2"><a></a>  x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb16-3"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="output-return" class="slide level2">
<h2>Output: <code>return()</code></h2>
<p>Your function will <em>give back</em> what would normally <em>print out</em>…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb17-2"><a></a>  x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb17-3"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a aria-hidden="true" tabindex="-1"></a><span class="dv">7</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_two</span>(<span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</div></div>
<p><br></p>
<div class="fragment">
<p>…but it’s better to be explicit and use <code>return()</code>*.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb22-2"><a></a>  <span class="fu">return</span>(x <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb22-3"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="function-style-using-returns" class="slide level2">
<h2>Function Style – Using <code>return()</code>s</h2>
<div class="midi">
<blockquote>
<p><a href="https://style.tidyverse.org/functions.html#return">“Only use <code>return()</code> for early returns. Otherwise, rely on R to return the result of the last evaluated expression.”</a></p>
</blockquote>
</div>
<div class="fragment">
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Good</span></span>
<span id="cb23-2"><a aria-hidden="true" tabindex="-1"></a>find_abs <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb23-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb23-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x)</span>
<span id="cb23-5"><a aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-6"><a aria-hidden="true" tabindex="-1"></a>  x <span class="sc">*</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb23-7"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Bad</span></span>
<span id="cb24-2"><a aria-hidden="true" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb24-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> y)</span>
<span id="cb24-4"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div></div>
</div>
<div class="fragment">
<div class="midi">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>I tend to disagree…</strong></p>
</div>
<div class="callout-content">
<p>I prefer to use <code>return()</code> statements because it saves me from accidentally writing a function that outputs nothing.</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="output-return-1" class="slide level2">
<h2>Output: <code>return()</code></h2>
<div class="midi">
<p>If you need to return <strong>more than one object</strong> from a function, wrap those objects in a <strong>list</strong>.</p>
</div>
<div class="small">
<div class="cell">
<div class="sourceCode cell-code" id="cb25" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>min_max <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb25-2"><a></a>  lowest <span class="ot">&lt;-</span> <span class="fu">min</span>(x)</span>
<span id="cb25-3"><a></a>  highest <span class="ot">&lt;-</span> <span class="fu">max</span>(x)</span>
<span id="cb25-4"><a></a>  <span class="fu">return</span>(<span class="fu">list</span>(lowest, highest))</span>
<span id="cb25-5"><a></a>}</span>
<span id="cb25-6"><a></a></span>
<span id="cb25-7"><a></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">346</span>,</span>
<span id="cb25-8"><a></a>         <span class="dv">547</span>,</span>
<span id="cb25-9"><a></a>         <span class="dv">865</span>, </span>
<span id="cb25-10"><a></a>         <span class="dv">112</span>, </span>
<span id="cb25-11"><a></a>         <span class="dv">58</span>)</span>
<span id="cb25-12"><a></a></span>
<span id="cb25-13"><a></a><span class="fu">min_max</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 58

[[2]]
[1] 865</code></pre>
</div>
</div>
</div>
</section>
<section id="input-validation" class="slide level2">
<h2>Input Validation</h2>
<p>When a function requires an input of a specific data type, check that the supplied argument is valid.</p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><span class="midi"><code>stopifnot()</code></span></a></li><li><a href="#tabset-2-2"><span class="midi"><code>if() + stop()</code></span></a></li><li><a href="#tabset-2-3"><span class="midi">Multiple validations</span></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb27" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>add_something <span class="ot">&lt;-</span> <span class="cf">function</span>(x, something){</span>
<span id="cb27-2"><a></a>  <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb27-3"><a></a>  <span class="fu">return</span>(x <span class="sc">+</span> something)</span>
<span id="cb27-4"><a></a>}</span>
<span id="cb27-5"><a></a></span>
<span id="cb27-6"><a></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="st">"statistics"</span>, <span class="at">something =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in add_something(x = "statistics", something = 5): is.numeric(x) is not TRUE</code></pre>
</div>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb29" data-code-line-numbers="2-4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>add_something <span class="ot">&lt;-</span> <span class="cf">function</span>(x, something){</span>
<span id="cb29-2"><a></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(x)){</span>
<span id="cb29-3"><a></a>    <span class="fu">stop</span>(<span class="st">"Please provide a numeric input for the x argument."</span>)</span>
<span id="cb29-4"><a></a>  }</span>
<span id="cb29-5"><a></a>  <span class="fu">return</span>(x <span class="sc">+</span> something)</span>
<span id="cb29-6"><a></a>}</span>
<span id="cb29-7"><a></a></span>
<span id="cb29-8"><a></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="st">"statistics"</span>, <span class="at">something =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in add_something(x = "statistics", something = 5): Please provide a numeric input for the x argument.</code></pre>
</div>
</div>
</div>
</div>
<div id="tabset-2-3">
<div class="midi">
<p>How would you modify the previous code to validate <strong>both</strong> <code>x</code> and <code>something</code>?</p>
<p>Meaning, the function should check if <strong>both</strong> <code>x</code> and <code>something</code> are numeric.</p>
</div>
</div>
</div>
</div>
</section>
<section id="multiple-validations-1" class="slide level2">
<h2>Multiple Validations</h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">Option 1: <code>if()</code> + <code>stop()</code></a></li><li><a href="#tabset-3-2">Option 2: <code>stopifnot()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb31" data-code-line-numbers="2-4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>add_something <span class="ot">&lt;-</span> <span class="cf">function</span>(x, something){</span>
<span id="cb31-2"><a></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.numeric</span>(x) <span class="sc">|</span> <span class="sc">!</span><span class="fu">is.numeric</span>(something)){</span>
<span id="cb31-3"><a></a>    <span class="fu">stop</span>(<span class="st">"Please provide numeric inputs for both arguments."</span>)</span>
<span id="cb31-4"><a></a>  }</span>
<span id="cb31-5"><a></a>  <span class="fu">return</span>(x <span class="sc">+</span> something)</span>
<span id="cb31-6"><a></a>}</span>
<span id="cb31-7"><a></a></span>
<span id="cb31-8"><a></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">something =</span> <span class="st">"R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in add_something(x = 2, something = "R"): Please provide numeric inputs for both arguments.</code></pre>
</div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb33" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>add_something <span class="ot">&lt;-</span> <span class="cf">function</span>(x, something){</span>
<span id="cb33-2"><a></a>  <span class="fu">stopifnot</span>(<span class="fu">is.numeric</span>(x), <span class="fu">is.numeric</span>(something))</span>
<span id="cb33-3"><a></a>  <span class="fu">return</span>(x <span class="sc">+</span> something)</span>
<span id="cb33-4"><a></a>}</span>
<span id="cb33-5"><a></a></span>
<span id="cb33-6"><a></a><span class="fu">add_something</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">something =</span> <span class="st">"R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in add_something(x = 2, something = "R"): is.numeric(something) is not TRUE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="variable-scope-environment" class="title-slide slide level1 center">
<h1>Variable Scope + Environment</h1>

</section>
<section id="variable-scope" class="slide level2">
<h2>Variable Scope</h2>
<p>The location (environment) in which we can find and access a variable is called its <strong>scope</strong>.</p>
<ul>
<li>We need to think about the scope of variables when we write functions.</li>
<li>What variables can we access <strong>inside</strong> a function?</li>
<li>What variables can we access <strong>outside</strong> a function?</li>
</ul>
</section>
<section id="global-environment" class="slide level2">
<h2>Global Environment</h2>
<ul>
<li>The top right pane of Rstudio shows you the <strong>global environment</strong>.
<ul>
<li>This is the <em>current state</em> of all objects you have created.</li>
<li>These objects can be accessed <strong>anywhere</strong>.</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/environment.jpg" class="quarto-figure quarto-figure-center" style="width:80.0%" alt="A screenshot of the Environment tab in the RStudio environment, which displays the set of objects created by the user that are stored in the global environment and can be used for analysis. This is where we've see the datasets we read in stored!"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="function-environment" class="slide level2">
<h2>Function Environment</h2>
<ul>
<li>The code inside a function executes in the <strong>function environment</strong>.
<ul>
<li>Function arguments and any variables created inside the function only exist inside the function.
<ul>
<li>They <strong>disappear</strong> when the function code is complete.</li>
</ul></li>
</ul></li>
<li>What happens in the function environment <strong>does not affect</strong> things in the global environment.</li>
</ul>
</section>
<section id="function-environment-1" class="slide level2">
<h2>Function Environment</h2>
<p>We <strong>cannot</strong> access variables created inside a function outside of the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a aria-hidden="true" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb35-2"><a aria-hidden="true" tabindex="-1"></a>  my_result <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb35-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(my_result)</span>
<span id="cb35-4"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_two</span>(<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a aria-hidden="true" tabindex="-1"></a>my_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'my_result' not found</code></pre>
</div>
</div>
</div>
</div></div>
</section>
<section id="name-masking" class="slide level2">
<h2>Name Masking</h2>
<div class="midi">
<p>Name masking occurs when an object in the <em>function environment</em> has the <strong>same name</strong> as an object in the <em>global environment</em>.</p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb40" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb40-2"><a></a>  my_result <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb40-3"><a></a>  <span class="fu">return</span>(my_result)</span>
<span id="cb40-4"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a aria-hidden="true" tabindex="-1"></a>my_result <span class="ot">&lt;-</span> <span class="dv">2000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</div>
<div class="fragment">
<p><br></p>
<div class="midi">
<p>The <code>my_result</code> created <strong>inside</strong> the function is different from the <code>my_result</code> created <strong>outside</strong>.</p>
<div class="columns">
<div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_two</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</div><div class="column">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a aria-hidden="true" tabindex="-1"></a>my_result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2000</code></pre>
</div>
</div>
</div></div>
</div>
</div>
</section>
<section id="dynamic-lookup" class="slide level2">
<h2>Dynamic Lookup</h2>
<div class="midi">
<p>Functions look for objects FIRST in the function environment and SECOND in the global environment.</p>
<div class="columns">
<div class="column">
<ul>
<li>If the object doesn’t exist in either, the code will give an error.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a aria-hidden="true" tabindex="-1"></a>add_two <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb46-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb46-3"><a aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_two</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in add_two(): object 'x' not found</code></pre>
</div>
</div>
</div><div class="column">
<div class="fragment">
<ul>
<li>If it doesn’t exist in the function environment, then it will look in the global environment</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb48-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a aria-hidden="true" tabindex="-1"></a><span class="fu">add_two</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
</div>
</div>
</div></div>
</div>
<div class="fragment">
<div class="small">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>It is not good practice to rely on global environment objects inside a function!</strong></p>
</div>
<div class="callout-content">

</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="debugging" class="title-slide slide level1 center">
<h1>Debugging</h1>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/51084276-ab7f-4c57-a0e7-5cf14a277359_rw_1920.png?h=825c5593149a63edef46664796766751" style="width:75.0%" alt="A cartoon of a fuzzy round monster face showing 10 different emotions experienced during the process of debugging code. The progression goes from (1) 'I got this' - looking determined and optimistic; (2) 'Huh. Really thought that was it.' - looking a bit baffled; (3) '...' - looking up at the ceiling in thought; (4) 'Fine. Restarting.' - looking a bit annoyed; (5) 'OH WTF.' Looking very frazzled and frustrated; (6) 'Zombie meltdown.' - looking like a full meltdown; (7) (blank) - sleeping; (8) 'A NEW HOPE!' - a happy looking monster with a lightbulb above; (9) 'insert awesome theme song' - looking determined and typing away; (10) 'I love coding' - arms raised in victory with a big smile, with confetti falling."></p>
<figcaption>Image by Allison Horst</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="debugging-1" class="slide level2">
<h2>Debugging</h2>
<p>You <strong>will</strong> make mistakes (create bugs) when coding.</p>
<ul>
<li>Unfortunately, it becomes more and more complicated to <strong>debug</strong> your code as your code gets more sophisticated.</li>
<li>This is especially true with functions!</li>
</ul>
<!-- ## Debugging Strategies -->
<!-- ::: {.small} -->
<!-- + Interactive coding -->
<!--   + Highlight lines within your function and run them one-by-one to see what -->
<!--   happens. -->
<!--   + You can run individual lines (or groups) of code by highlighting and hitting -->
<!--   [Command + Return] or [Control + Enter].  -->
<!-- ::: -->
<!-- . . . -->
<!-- ::: {.small} -->
<!-- + `print()` debugging -->
<!--   + Add `print()` statements throughout your code to make sure the values are what you expect. -->
<!-- ::: -->
<!-- . . . -->
<!-- ::: {.small} -->
<!-- + Rubber Ducking -->
<!--   + Verbally explain your code line by line to a rubber duck (or a human). -->
<!--   + This is what we do in our Practice Activities!!! -->
<!-- ::: -->
</section>
<section id="debugging-strategies" class="slide level2">
<h2>Debugging Strategies</h2>
<p>When you have a concept that you want to turn into a function…</p>
<div>
<ol type="1">
<li class="fragment"><p>Write a simple <strong>example</strong> of the code without the function framework.</p></li>
<li class="fragment"><p><strong>Generalize</strong> the example by assigning variables.</p></li>
<li class="fragment"><p><strong>Write</strong> the code into a function.</p></li>
<li class="fragment"><p><strong>Call</strong> the function on the desired arguments</p></li>
</ol>
</div>
<div class="fragment">
<p><strong>This structure allows you to address issues as you go.</strong></p>
</div>
</section>
<section id="an-example" class="slide level2">
<h2>An Example</h2>
<p>Write a function called <code>find_car_make()</code> that takes in the name of a car and returns the “make” of the car (the company that created it).</p>
<ul>
<li><code>find_car_make("Toyota Camry")</code> should return “Toyota”.</li>
<li><code>find_car_make("Ford Anglica")</code> should return “Ford”.</li>
</ul>
</section>
<section id="an-example-1" class="slide level2">
<h2>An Example</h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Simple Examples</a></li><li><a href="#tabset-4-2">Generalize</a></li><li><a href="#tabset-4-3">Write + Call Funciton</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a aria-hidden="true" tabindex="-1"></a>make <span class="ot">&lt;-</span> <span class="fu">word</span>(<span class="at">string =</span> <span class="st">"Toyota Camry"</span>,</span>
<span id="cb50-2"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">start =</span> <span class="dv">1</span>, </span>
<span id="cb50-3"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">end =</span> <span class="dv">1</span>)</span>
<span id="cb50-4"><a aria-hidden="true" tabindex="-1"></a>make</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Toyota"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a aria-hidden="true" tabindex="-1"></a>make <span class="ot">&lt;-</span> <span class="fu">word</span>(<span class="at">string =</span> <span class="st">"Ford Anglica"</span>,</span>
<span id="cb52-2"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">start =</span> <span class="dv">1</span>, </span>
<span id="cb52-3"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">end =</span> <span class="dv">1</span>)</span>
<span id="cb52-4"><a aria-hidden="true" tabindex="-1"></a>make</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ford"</code></pre>
</div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a aria-hidden="true" tabindex="-1"></a>car_name <span class="ot">&lt;-</span> <span class="st">"Toyota Camry"</span></span>
<span id="cb54-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a aria-hidden="true" tabindex="-1"></a>make <span class="ot">&lt;-</span> <span class="fu">word</span>(<span class="at">string =</span> car_name, </span>
<span id="cb54-4"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">start =</span> <span class="dv">1</span>, </span>
<span id="cb54-5"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">end =</span> <span class="dv">1</span>)</span>
<span id="cb54-6"><a aria-hidden="true" tabindex="-1"></a>make</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Toyota"</code></pre>
</div>
</div>
</div>
<div id="tabset-4-3">
<p>Taking these examples, write a <code>find_car_make()</code> function that will output the maker / manufacturer of any car.</p>
<p>Once you’ve got a function written, can you add input validation to your function?</p>
</div>
</div>
</div>
</section>
<section id="find_car_make" class="slide level2">
<h2><code>find_car_make()</code></h2>
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a aria-hidden="true" tabindex="-1"></a>find_car_make <span class="ot">&lt;-</span> <span class="cf">function</span>(car_name){</span>
<span id="cb56-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if there is a space in the string (so there are separate parts)</span></span>
<span id="cb56-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(</span>
<span id="cb56-4"><a aria-hidden="true" tabindex="-1"></a>    stringr<span class="sc">::</span><span class="fu">str_detect</span>(car_name, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">w"</span>)</span>
<span id="cb56-5"><a aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb56-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grab the first word of the car name (assuming Toyota Camry style input)</span></span>
<span id="cb56-7"><a aria-hidden="true" tabindex="-1"></a>  make <span class="ot">&lt;-</span> <span class="fu">word</span>(<span class="at">string =</span> car_name, </span>
<span id="cb56-8"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">start =</span> <span class="dv">1</span>, </span>
<span id="cb56-9"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">end =</span> <span class="dv">1</span>)</span>
<span id="cb56-10"><a aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(make)</span>
<span id="cb56-12"><a aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">find_car_make</span>(<span class="st">"Toyota Camry"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Toyota"</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<div class="midi">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">find_car_make</span>(<span class="st">"Ford Anglica"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ford"</code></pre>
</div>
</div>
</div>
</div></div>
</section></section>
<section>
<section id="pa-7-writing-functions" class="title-slide slide level1 center">
<h1><a href="../../group-activities/week-7/PA-7-functions.html">PA 7: Writing Functions</a></h1>
<p><img data-src="images/number-tiles.png" alt=""></p>
</section>
<section id="pa-7" class="slide level2">
<h2>PA 7</h2>
<p>You will write several small functions, then use them to unscramble a message. Many of the functions have been started for you, but <strong>none</strong> of them are complete as is.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:55%;">
<div class="small">
<p>This activity will require knowledge of:</p>
<ul>
<li>Summary functions</li>
<li>Function documentation (for optional arguments)</li>
<li>Function syntax</li>
<li>modulus division (and remainders)</li>
<li><code>if ()</code> &amp; <code>else if()</code> statements</li>
<li>Using <code>[]</code> and logical values to extract elements of a vector</li>
<li>Negating logical statements</li>
</ul>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:40%;">
<p><br> <br></p>
<p><span class="midi"><strong>None of us have all these abilities. Each of us has some of these abilities.</strong></span></p>
</div></div>
</div>
</section>
<section id="base-r-resources" class="slide level2">
<h2>Base R Resources</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Every group should have a <strong>base R</strong> cheatsheet!</p>
<div class="fragment">
<div class="small">
<p><strong>On the front middle</strong>:</p>
<ul>
<li><strong><em>Selecting Vectors</em></strong> can refresh your memory on using <code>[]</code> to extract elements of a vector</li>
</ul>
</div>
</div>
<div class="fragment">
<div class="small">
<p><strong>On the front right</strong>:</p>
<ul>
<li><strong><em>If Statements</em></strong> can help you write conditional checks / returns for your functions</li>
<li><strong><em>Functions</em></strong> can help you remember the syntax for creating a function</li>
</ul>
</div>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:35%;">
<p><img data-src="images/base-r-cheatsheet.png" alt="A Base R Cheat Sheet with various R programming syntax and examples. It covers topics such as reading and writing data (e.g., read.csv, write.csv), accessing help with R functions (e.g., ?mean), using control structures like for loops and if statements, defining functions, vector operations, using libraries, and working with different data types like lists, matrices, and data frames. There are examples of matrix operations, conditions, statistical functions (e.g., mean, sd), and plotting basics (e.g., plot, hist). The cheat sheet includes tips on environment management and converting between data types."></p>
</div></div>
</section>
<section id="getting-started" class="slide level2">
<h2>Getting Started</h2>
<p>The partner who lives the furthest from SLO starts as the Developer (typing and listening to instructions from the Coder)!</p>
<ul>
<li>The Coder <strong>does not type</strong>.
<ul>
<li>The collaborative editing feature should allow you to track what is being typed.</li>
</ul></li>
<li>The Developer <strong>only types what they are told to type</strong>.</li>
</ul>
</section>
<section id="submission" class="slide level2">
<h2>Submission</h2>
<blockquote>
<p>Submit the name of the television show the six numbers are associated with.</p>
</blockquote>
<ul>
<li>Each person will input the full name of the TV show into the PA 7 quiz.</li>
<li>Each person will submit the <code>PA-7-functions.html</code> file.</li>
</ul>
</section>
<section id="lab-7-challenge-7-functions-fish" class="slide level2">
<h2><a href="../../labs/instructions/lab-7-instructions.html">Lab 7</a> &amp; <a href="../../labs/instructions/challenge-7-instructions.html">Challenge 7: Functions + Fish</a></h2>
<div class="centered">
<p><img data-src="https://github.com/earobinson95/stat331-calpoly/blob/master/lab-assignments/lab7/images/blackfoot_river.jpg?raw=true" alt="A serene scene of the Blackfoot River in Montana, with a small raft carrying two people navigating the gentle current. The river winds through a landscape of rugged, rocky shores and lush, green pine forests. Rolling hills and distant mountains frame the background under a lightly clouded sky."></p>
</div>
</section>
<section id="to-do" class="slide level2">
<h2>To do…</h2>
<ul>
<li><strong>PA 7: Functions</strong>
<ul>
<li>Due Thursday, 2/20 by 12pm</li>
</ul></li>
</ul>
<!-- + **Attend Your Midterm Portfolio Meeting** -->
<!--   + [Your Scheduled time on Thursday](https://docs.google.com/spreadsheets/d/1b4fUfPIT_05niJlpHNnne_y5HXXB-43Nzph6_FWZf80/edit?usp=sharing) -->
<ul>
<li><strong>Lab 7: Functions + Fish</strong>
<ul>
<li>Due Sunday, 2/23 at 11:59pm.</li>
</ul></li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/github\.com\/hglanz\/statistical-computing-with-r");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>